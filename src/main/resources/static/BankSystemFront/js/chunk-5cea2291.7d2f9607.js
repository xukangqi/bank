(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cea2291"],{"0433":function(t,e,a){"use strict";var r=a("ba64"),o=a.n(r);o.a},"2fdb":function(t,e,a){"use strict";var r=a("5ca1"),o=a("d2c8"),s="includes";r(r.P+r.F*a("5147")(s),"String",{includes:function(t){return!!~o(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"466f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("a-table",{attrs:{dataSource:e.data,columns:e.columns,loading:e.loading},scopedSlots:e._u([{key:"filterDropdown",fn:function(t){var a=t.setSelectedKeys,o=t.selectedKeys,s=t.confirm,n=t.clearFilters;return r("div",{staticClass:"custom-filter-dropdown"},[r("a-input",{ref:"searchInput",attrs:{placeholder:"查询基金代码",value:o[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return e.handleSearch(o,s)}}}),r("a-button",{attrs:{type:"primary"},on:{click:function(){return e.handleSearch(o,s)}}},[e._v("查询")]),r("a-button",{attrs:{type:"danger"},on:{click:function(){return e.handleReset(n)}}},[e._v("重置")])],1)}},{key:"filterIcon",fn:function(t){return r("a-icon",{style:{color:t?"#108ee9":"#aaa"},attrs:{type:"search"}})}},{key:"operation",fn:function(t,a){return[r("a-button",{attrs:{type:"primary"},on:{click:function(){return e.showDrawer(a.fundId,a.purchaseDate)}}},[e._v("显示详情")])]}},{key:"customRender",fn:function(t){return[e.searchText?r("span",[e._l((t+"").split(new RegExp("(?<="+e.searchText+")|(?="+e.searchText+")","i")),function(t,a){return[t.toLowerCase()===e.searchText.toLowerCase()?r("span",{key:a,staticClass:"highlight"},[e._v(e._s(t))]):[e._v(e._s(t))]]})],2):[e._v(e._s(t))]]}}])}),r("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"'auto'",paddingBottom:"53px"},attrs:{width:"440",placement:"right",closable:!1,visible:e.visible},on:{close:e.onClose}},[r("a-collapse",{staticClass:"customPanelStyle"},[r("a-collapse-panel",{key:"1",attrs:{header:"基金产品详情"}},[r("div",{staticStyle:{background:"#ECECEC",padding:"30px"}},[r("a-card",{staticStyle:{width:"300px"},attrs:{bordered:!1,hoverable:""}},[r("p",[e._v("基金代码："+e._s(this.detailValue.fundId))]),r("p",[e._v("交易类型："+e._s(this.detailValue.type))]),r("p",[e._v("申购费率："+e._s(this.detailValue.purchaseRate)+"%")]),r("p",[e._v("基金单位净值："+e._s(this.detailValue.netAssetValue))]),r("p",[e._v("赎回费率："+e._s(this.detailValue.redemptionRate)+"%")]),r("p",[e._v("记录时间："+e._s(this.detailValue.purchaseDate))])])],1)]),r("a-collapse-panel",{key:"2",attrs:{header:"基金购买申请"}},[r("div",{staticStyle:{background:"#ECECEC",padding:"30px"}},[r("a-card",{staticStyle:{width:"300px"},attrs:{bordered:!1,hoverable:""}},[r("a-form",{attrs:{layout:"vertical",autoFormCreate:function(e){t.form=e}}},[r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"基金代码",fieldDecoratorId:"fundId"}},[r("a-col",{attrs:{span:15,offset:6}},[e._v(e._s(this.detailValue.fundId))])],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"用户名",fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"用户名不能为空"}]}}},[r("a-input",{attrs:{placeholder:"请输入用户名"}})],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"用户手机号",fieldDecoratorId:"phone",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入用户手机号"},{validator:this.checkTelephone}]}}},[r("a-input",{attrs:{placeholder:"请输入用户手机号"}})],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"账户号",fieldDecoratorId:"account",fieldDecoratorOptions:{rules:[{required:!0,message:"账户号不能为空"}]}}},[r("a-input",{attrs:{placeholder:"请输入账户号"}})],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"交易类型",fieldDecoratorId:"type"}},[r("a-col",{attrs:{span:8,offset:8}},[e._v(e._s(this.detailValue.type))])],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"投资金额",fieldDecoratorId:"amount",fieldDecoratorOptions:{rules:[{required:!0,message:"投资金额不能为空"}]}}},[r("a-input",{attrs:{placeholder:"请输入投资金额"}})],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"账户密码",fieldDecoratorId:"password",fieldDecoratorOptions:{rules:[{required:!0,message:"密码不能为空"}]}}},[r("a-input",{attrs:{placeholder:"请输入账户密码",type:"password"},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}})],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:3}}),r("a-col",{attrs:{span:18}},[r("a-form-item",{attrs:{label:"重新输入密码",fieldDecoratorId:"confirmpwd",fieldDecoratorOptions:{rules:[{required:!0,message:"密码不能为空"},{validator:this.checkPassword}]}}},[r("a-input",{attrs:{placeholder:"请再次输入账户密码",type:"password"}})],1)],1),r("a-col",{attrs:{span:3}})],1),r("a-row",[r("a-col",{attrs:{span:6}}),r("a-col",{attrs:{span:15}},[r("a-form-item",[r("a-button-group",[r("a-button",{attrs:{type:"primary",htmlType:"submit"},on:{click:e.handleSubmit}},[e._v("提交")]),r("a-button",{attrs:{type:"danger"},on:{click:e.handleFormReset}},[e._v("重置")])],1)],1)],1),r("a-col",{attrs:{span:3}})],1)],1)],1)],1)])],1),r("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[r("a-button",{on:{click:e.onClose}},[e._v("\n          关闭\n        ")])],1)],1)],1)},o=[],s=a("6bde"),n=(a("7f7f"),a("6762"),a("2fdb"),{mounted:function(){var t=this;this.loading=!0,this.reviewerId=this.$store.getters.user.userId,this.$axios({method:"get",url:"/user/fund/query/product"}).then(function(e){var a=e.data,r=a.status;if(200==r){t.loading=!1;for(var o=0;o<a.data.length;o++)a.data[o].type=0==a.data[o].type?"认购":"申购",a.data[o].purchaseRate=a.data[o].purchaseRate.toFixed(2),a.data[o].netAssetValue=a.data[o].netAssetValue.toFixed(4),a.data[o].redemptionRate=a.data[o].redemptionRate.toFixed(2),a.data[o].purchaseDate=t.formatDate(a.data[o].purchaseDate);t.data=a.data}else t.$notification.open({message:"错误",description:a.msg})}).catch(function(e){console.log("通信失败，请稍后再试"),t.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})},data:function(){var t=this;return{data:[],formateDate:[],loading:!1,visible:!1,searchText:"",detailValue:{},pwd:void 0,reviewerId:"",drawFundId:"",drawPurchaseDate:"",columns:[{title:"基金代码",dataIndex:"fundId",key:"fundId",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return(e.fundId+"").includes(t)},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){t.$refs.searchInput.focus()})}},{title:"交易类型",dataIndex:"type",key:"type",filters:[{text:"认购",value:"认购"},{text:"申购",value:"申购"}],onFilter:function(t,e){return e.type==t}},{title:"申购费率",dataIndex:"purchaseRate"},{title:" 基金单位净值",dataIndex:"netAssetValue"},{title:"赎回费率",dataIndex:"redemptionRate"},{title:"记录时间",dataIndex:"purchaseDate"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}]}},methods:{handleSearch:function(t,e){e(),this.searchText=t[0],console.log(this.searchText)},handleReset:function(t){t(),this.searchText=""},showDrawer:function(t,e){var a=this;this.visible=!0,this.drawFundId=t,this.drawPurchaseDate=e,this.$axios({method:"get",url:"/user/fund/query/productdetail?fundId="+this.drawFundId}).then(function(t){var e,r=t.data,o=r.status;if(200==o){var s,n=r.data;for(s=0;s<n.length;s++)if(a.formatDate(n[s].purchaseDate)==a.drawPurchaseDate){e=n[s],e.type=0==n[s].type?"认购":"申购",e.purchaseRate=n[s].purchaseRate.toFixed(2),e.netAssetValue=n[s].netAssetValue.toFixed(4),e.redemptionRate=n[s].redemptionRate.toFixed(2),e.purchaseDate=a.formatDate(n[s].purchaseDate);break}a.detailValue=e}else a.$notification.open({message:"错误",description:r.msg})}).catch(function(t){console.log("通信失败，请稍后再试"),a.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})},onClose:function(){this.visible=!1},formatDate:function(t){var e=new Date(parseInt(t));return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,a){t||(a.fundId=e.detailValue.fundId,a.type=e.detailValue.type,console.log("Received values of form: ",a),e.$axios({method:"post",url:"/user/fund/create/tx/purchase",params:{fundId:a.fundId,name:a.name,phone:a.phone,account:a.account,type:a.type,amount:a.amount,password:a.password,reviewerId:e.reviewerId}}).then(function(t){var a=t.data;200==a.status?(e.form.resetFields(),e.visible=!1,e.$notification.open({message:"基金购买申请成功！",description:"提交申请成功！"})):(console.log(a),e.$notification.open({message:"基金购买申请失败！",description:a.msg}))}).catch(function(t){console.log(t),e.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})}))})},handleFormReset:function(){this.form.resetFields()},checkTelephone:function(t,e,a){0==e.length&&a(),/^1[34578]\d{9}$/.test(e)?a():a("手机号码错误")},checkPassword:function(t,e,a){void 0==Object(s["a"])(e)?a("请再次输入密码"):e===this.pwd?a():a("密码不一致")}}}),i=n,c=(a("0433"),a("2877")),l=Object(c["a"])(i,r,o,!1,null,"3dd4b03c",null);l.options.__file="QueryFund.vue";e["default"]=l.exports},5147:function(t,e,a){var r=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},6762:function(t,e,a){"use strict";var r=a("5ca1"),o=a("c366")(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},ba64:function(t,e,a){},d2c8:function(t,e,a){var r=a("aae3"),o=a("be13");t.exports=function(t,e,a){if(r(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(o(t))}}}]);
//# sourceMappingURL=chunk-5cea2291.7d2f9607.js.map