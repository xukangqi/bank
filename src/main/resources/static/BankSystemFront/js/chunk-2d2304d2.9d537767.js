(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2304d2"],{ec64:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("a-form",{staticStyle:{"margin-top":"20px"},attrs:{autoFormCreate:function(t){e.form=t}},on:{submit:t.handleSubmit}},[o("h2",{staticStyle:{"margin-left":"38%","margin-bottom":"20px"}},[t._v("贷款申请")]),o("a-form-item",{attrs:{label:"申请人",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入申请人姓名"}]}}},[o("a-input")],1),o("a-form-item",{attrs:{label:"身份证",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"id",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入申请人身份证号"},{validator:this.checkID}]}}},[o("a-input")],1),o("a-form-item",{attrs:{label:"手机号",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"phone",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入申请人手机号"},{validator:this.checkTelephone}]}}},[o("a-input")],1),o("a-form-item",{attrs:{label:"账号",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"account",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入需要申请贷款的银行账号"}]}}},[o("a-input")],1),o("a-form-item",{attrs:{label:"贷款金额",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"amount",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入需要贷款金额"}]}}},[o("a-input")],1),o("a-form-item",{attrs:{label:"贷款期限",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"time",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入贷款期限"}]}}},[o("a-input",{attrs:{addonAfter:"月"}})],1),o("a-form-item",{attrs:{label:"贷款类型",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"loanType",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入贷款类型"}]}}},[o("a-select",{attrs:{defaultValue:"1"},on:{change:t.handleInterestRateChange}},[o("a-select-option",{attrs:{value:"1"}},[t._v("住房贷款")]),o("a-select-option",{attrs:{value:"2"}},[t._v("小微贷款")]),o("a-select-option",{attrs:{value:"3"}},[t._v("消费贷款")])],1)],1),o("a-form-item",{attrs:{label:"贷款利率",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"nouse"}},[o("a-popover",{attrs:{title:"规定贷款利率"}},[o("template",{slot:"content"},[o("p",[t._v("一年期以上:"+t._s(t.interestRate.one)+"%")]),o("p",[t._v("三年期以上:"+t._s(t.interestRate.three)+"%")]),o("p",[t._v("五年期以上:"+t._s(t.interestRate.five)+"%")]),o("p",[t._v("违约利率:"+t._s(t.interestRate.fineRate)+"%")])]),o("a-input",{attrs:{addonAfter:"%"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}})],2)],1),o("a-form-item",{attrs:{label:"还款账户密码",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"password",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入账户密码"}]}}},[o("a-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("a-form-item",{attrs:{label:"重复还款账户密码",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"password2",fieldDecoratorOptions:{rules:[{required:!0,message:"请再次输入账户密码"},{validator:this.checkPassword}]}}},[o("a-input",{attrs:{type:"password"}})],1),o("a-form-item",{attrs:{wrapperCol:{span:12,offset:5}}},[o("a-button",{attrs:{type:"primary",htmlType:"submit"}},[t._v("\n      提交申请\n    ")])],1)],1)},r=[],n=a("6bde"),s=(a("7f7f"),{name:"LoadApply",data:function(){return{password:void 0,formLayout:"horizontal",interestRate:{one:0,three:0,five:0,fineRate:0},radio:void 0,reviewerId:void 0}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(0==t.radio?t.$notification.open({message:"错误",description:"请输入利率信息"}):(console.log("开始提交"),t.radio=parseFloat(t.radio),t.$axios({method:"post",url:"/loan/apply",params:{name:a.name,IdCard:a.id,phone:a.phone,account:a.account,amount:a.amount,time:a.time,interestRate:t.radio,password:a.password,loanType:a.loanType,reviewerId:t.reviewerId}}).then(function(e){var a=e.data;console.log(a),200==a.status?(t.$notification.open({message:"申请成功",description:"提交申请成功"}),t.$router.push("/admin/loan/manage")):t.$notification.open({message:"提交申请失败",description:a.msg})}).catch(function(e){t.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})))})},handleIdChange:function(e){console.log(e)},checkID:function(e,t,a){console.log(t),"undefined"===typeof t&&a("请输入申请人身份证号");var o=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,r=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/;18==t.length?r.test(t)?a():a("身份证号码格式不正确"):15==t.length&&o.test(t)?a():a("身份证号码格式不正确")},checkTelephone:function(e,t,a){void 0==Object(n["a"])(t)&&a(),/^1[34578]\d{9}$/.test(t)?a():a("手机号码错误")},checkPassword:function(e,t,a){void 0==Object(n["a"])(t)?a("请再次输入密码"):t===this.password?a():a("密码不一致")},handleInterestRateChange:function(e){var t=this;this.$axios({method:"get",url:"/loan/interestRate/"+e}).then(function(e){var a=e.data,o=a.status;200==o?(t.interestRate.one=a.data.periodOne,t.interestRate.three=a.data.periodTwo,t.interestRate.five=a.data.periodThree,t.interestRate.fineRate=a.data.fineRate):t.$notification.open({message:"错误",description:a.msg})}).catch(function(e){console.log("通信失败，请稍后再试"),t.$notification.open({message:"错误",description:"无法获得利率信息"})})}},mounted:function(){var e=this;this.reviewerId=this.$store.getters.user.userId,this.$axios({method:"get",url:"/loan/interestRate/1"}).then(function(t){var a=t.data;console.log(a);var o=a.status;200==o?(e.interestRate.one=a.data.periodOne,e.interestRate.three=a.data.periodTwo,e.interestRate.five=a.data.periodThree,e.interestRate.fineRate=a.data.fineRate):e.$notification.open({message:"错误",description:a.msg})}).catch(function(t){console.log(t),e.$notification.open({message:"错误",description:"无法获得利率信息"})})}}),i=s,l=a("2877"),d=Object(l["a"])(i,o,r,!1,null,null,null);d.options.__file="loanApply.vue";t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d2304d2.9d537767.js.map