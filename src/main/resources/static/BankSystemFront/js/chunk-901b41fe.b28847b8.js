(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-901b41fe"],{"2fdb":function(t,e,a){"use strict";var n=a("5ca1"),o=a("d2c8"),s="includes";n(n.P+n.F*a("5147")(s),"String",{includes:function(t){return!!~o(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,a){var n=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},6762:function(t,e,a){"use strict";var n=a("5ca1"),o=a("c366")(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},6848:function(t,e,a){"use strict";var n=a("e329"),o=a.n(n);o.a},"9f2a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("a-table",{attrs:{dataSource:e.data,columns:e.columns,scroll:{x:1500}},scopedSlots:e._u([{key:"filterDropdown",fn:function(t){var a=t.setSelectedKeys,o=t.selectedKeys,s=t.confirm,i=t.clearFilters;return n("div",{staticClass:"custom-filter-dropdown"},[n("a-input",{ref:"searchInput",attrs:{placeholder:"查找贷款账号",value:o[0]},on:{change:function(t){return a(t.target.value?[t.target.value]:[])},pressEnter:function(){return e.handleSearch(o,s)}}}),n("a-button",{attrs:{type:"primary"},on:{click:function(){return e.handleSearch(o,s)}}},[e._v("Search")]),n("a-button",{on:{click:function(){return e.handleReset(i)}}},[e._v("Reset")])],1)}},{key:"filterIcon",fn:function(t){return n("a-icon",{style:{color:t?"#108ee9":"#aaa"},attrs:{type:"search"}})}},{key:"customRender",fn:function(t){return[e.searchText?n("span",[e._l(t.split(new RegExp("(?<="+e.searchText+")|(?="+e.searchText+")","i")),function(t,a){return[t.toLowerCase()===e.searchText.toLowerCase()?n("span",{key:a,staticClass:"highlight"},[e._v(e._s(t))]):[e._v(e._s(t))]]})],2):[e._v(e._s(t))]]}},{key:"operation",fn:function(t,a){return[n("a-button",{attrs:{type:"primary"},on:{click:function(){return e.showDrawer(a.transId)}}},[e._v("显示详情")])]}}])}),n("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"'auto'",paddingBottom:"53px"},attrs:{title:"贷款详情",width:"720",placement:"right",closable:!1,visible:e.visible},on:{close:e.onClose}},[n("div",[n("a-collapse",{attrs:{accordion:""}},[n("a-collapse-panel",{key:"1",attrs:{header:"贷款详细信息"}},[n("p",[e._v("贷款交易流水号:"+e._s(this.detailValue.transId))]),n("p",[e._v("贷款账户:"+e._s(this.detailValue.account))]),n("p",[e._v("贷款日期:"+e._s(e.formatDate(this.detailValue.transDate)))]),n("p",[e._v("贷款金额:"+e._s(this.detailValue.loanAmount))]),n("p",[e._v("分期数目:"+e._s(this.detailValue.insCount)+"个月")]),n("p",[e._v("贷款利率:"+e._s(this.detailValue.loanInterest))]),n("p",[e._v("贷款总金额:"+e._s(this.detailValue.loanAmountSum))]),n("p",[e._v("到期时间:"+e._s(e.formatDate(this.detailValue.expirationDate)))]),n("p",[e._v("已收到还款:"+e._s(this.detailValue.recoveredAmount))]),n("p",[e._v("贷款状态:"+e._s(this.detailValue.loanStatus))]),n("p",[e._v("贷款类型:"+e._s(this.detailValue.loanTypeName))]),n("p",[e._v("审核人信息:"+e._s(this.detailValue.reviewerId))])]),n("a-collapse-panel",{key:"2",attrs:{header:"分期详情",disabled:!1}},[n("a-table",{attrs:{columns:e.paymentColumns,dataSource:e.loanPayment}})],1),n("a-collapse-panel",{key:"3",attrs:{header:"还款记录",disabled:!1}},[n("a-table",{attrs:{columns:e.paylogColumns,dataSource:e.loanPaylog}})],1),n("a-collapse-panel",{key:"4",attrs:{header:"还款申请",disabled:!1}},[n("a-form",{staticStyle:{"margin-top":"20px"},attrs:{autoFormCreate:function(e){t.form=e}},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"申请人",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入姓名"}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"身份证",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"id",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入身份证号"},{validator:this.checkID}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"手机号",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"telephone",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入手机号"},{validator:this.checkTelephone}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"账号",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"account",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入需要还款的银行账号"}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"还款金额",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"amount",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入还款金额"}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"还款账户密码",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"password",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入还款账户密码"}]}}},[n("a-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("a-form-item",{attrs:{label:"重复还款账户密码",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"password2",fieldDecoratorOptions:{rules:[{required:!0,message:"请再次输入还款账户密码"},{validator:this.checkPassword}]}}},[n("a-input",{attrs:{type:"password"}})],1),n("a-form-item",{attrs:{wrapperCol:{span:12,offset:5}}},[n("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("\n                                提交还款\n                            ")])],1)],1)],1)],1)],1),n("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[n("a-button",{style:{marginRight:8},on:{click:e.onClose}},[e._v("\n                关闭\n            ")])],1)])],1)},o=[],s=a("6bde"),i=(a("7f7f"),a("6762"),a("2fdb"),{name:"LoanManage",data:function(){var t=this;return{formLayout:"horizontal",data:[],password:void 0,DrawTransId:void 0,detailValue:{},loanPaylog:[],loanPayment:[],visible:!1,clickrow:0,searchText:"",columns:[{title:"交易流水号",dataIndex:"transId",key:"transId",width:200,fixed:"left"},{title:"贷款账号",dataIndex:"account",width:140,key:"account",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.name.toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){t.$refs.searchInput.focus()})}},{title:"贷款日期",width:120,dataIndex:"transDate",key:"transDate"},{title:"贷款金额",width:100,dataIndex:"loanAmount",key:"loanAmount"},{title:"贷款总金额",width:100,dataIndex:"loanAmountSum",key:"loanAmountSum"},{title:"已收到金额",width:80,dataIndex:"recoveredAmount",key:"recoveredAmount"},{title:"贷款状态",width:70,dataIndex:"loanStatus",key:"loanStatus",filters:[{text:"未到期",value:"未到期"},{text:"已还清",value:"已还清"},{text:"逾期",value:"逾期"}],onFilter:function(t,e){return e.loanStatus==t}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:70}],paylogColumns:[{title:"还款交易流水号",dataIndex:"paylogId",key:"paylogId"},{title:"还款账户",dataIndex:"account",key:"account"},{title:"本次还款金额",dataIndex:"payAmount",key:"payAmount"},{title:"还款时间",dataIndex:"payDate",key:"payDate"}],paymentColumns:[{title:"分期期数",dataIndex:"insNum",key:"insNum"},{title:"分期金额",dataIndex:"paymentAmount",key:"paymentAmount"},{title:"已还金额",dataIndex:"reimbursement",key:"reimbursement"},{title:"需还总金额",dataIndex:"allPaymentAmount",key:"allPaymentAmount"},{title:"到期时间",dataIndex:"paymentDate",key:"paymentDate"},{title:"当前状态",dataIndex:"isFinished",key:"isFinished"}]}},methods:{handleSearch:function(t,e){e(),this.searchText=t[0]},handleReset:function(t){t(),this.searchText=""},formatPaymentStatus:function(t){var e="";return e=1==t?"已还清":"未还清",e},showDrawer:function(t){var e=this;this.DrawTransId=t,this.visible=!0,this.$axios({method:"get",url:"/loan/"+this.DrawTransId}).then(function(t){var a=t.data,n=a.status;200==n?e.detailValue=a.data:e.$notification.open({message:"错误",description:a.msg})}).catch(function(t){console.log(t),e.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})}),this.$axios({method:"get",url:"/loan/paylog/"+this.DrawTransId}).then(function(t){var a=t.data,n=a.status;if(200==n){for(var o=a.data,s=0;s<o.length;s++)o[s].payDate=e.formatDate(o[s].payDate);e.loanPaylog=o}else e.$notification.open({message:"错误",description:a.msg})}).catch(function(t){console.log(t),e.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})}),this.$axios({method:"get",url:"/loan/payment/"+this.DrawTransId}).then(function(t){var a=t.data,n=a.status;if(200==n){for(var o=a.data,s=0;s<o.length;s++)o[s].paymentDate=e.formatDate(o[s].paymentDate),o[s].isFinished=e.formatPaymentStatus(o[s].isFinished);e.loanPayment=o}else e.$notification.open({message:"错误",description:a.msg})}).catch(function(t){console.log(t),e.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})},onClose:function(){this.visible=!1},formatDate:function(t){var e=new Date(parseInt(t));return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},formatLoanStatus:function(t){var e="";switch(t){case 1:e="未到期";break;case 2:e="已还清";break;case 3:break}return e},checkID:function(t,e,a){"undefined"===typeof e&&a("请输入申请人身份证号");var n=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,o=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/;18==e.length?o.test(e)?a():a("身份证号码格式不正确"):15==e.length&&n.test(e)?a():a("身份证号码格式不正确")},checkTelephone:function(t,e,a){void 0==Object(s["a"])(e)&&a(),/^1[34578]\d{9}$/.test(e)?a():a("手机号码错误")},checkPassword:function(t,e,a){void 0==Object(s["a"])(e)?a("请再次输入密码"):e===this.password?a():a("密码不一致")},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,a){t||e.$axios({method:"post",url:"/loan/payment",params:{name:a.name,IdCard:a.id,telephone:a.telephone,account:a.account,amount:a.amount,transId:e.DrawTransId,password:a.password}}).then(function(t){var a=t.data;200==a.status?(e.$notification.open({message:"申请成功",description:"提交申请成功"}),e.form.resetFields(),e.updateData(),setTimeout(function(){e.visible=!1},500)):e.$notification.open({message:"提交申请失败",description:a.msg})}).catch(function(t){e.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})})},updateData:function(){var t=this;this.$axios({method:"get",url:"/loan/allRecord"}).then(function(e){var a=e.data,n=a.status;if(200==n){for(var o=0;o<a.data.length;o++)a.data[o].transDate=t.formatDate(a.data[o].transDate);t.data=a.data}else t.$notification.open({message:"错误",description:a.msg})}).catch(function(e){console.log(e),t.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})}},mounted:function(){var t=this;this.$axios({method:"get",url:"/loan/allRecord"}).then(function(e){var a=e.data,n=a.status;if(200==n){for(var o=0;o<a.data.length;o++)a.data[o].transDate=t.formatDate(a.data[o].transDate);t.data=a.data}else t.$notification.open({message:"错误",description:a.msg})}).catch(function(e){console.log(e),t.$notification.open({message:"错误",description:"服务器开小差了,请稍后再试"})})}}),r=i,l=(a("6848"),a("2877")),d=Object(l["a"])(r,n,o,!1,null,"a2f41072",null);d.options.__file="loanManage.vue";e["default"]=d.exports},d2c8:function(t,e,a){var n=a("aae3"),o=a("be13");t.exports=function(t,e,a){if(n(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(o(t))}},e329:function(t,e,a){}}]);
//# sourceMappingURL=chunk-901b41fe.b28847b8.js.map